"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["56909"],{11334:function(e,t){t.default={header:"header-m1Ob8p",thin:"thin-guwzeE","center-thin":"center-thin-dID71l",centerThin:"center-thin-dID71l"}},75497:function(e,t){t.default={fallback:"fallback-24hX7A",panel:"panel-_8Tlyz",greeting:"greeting-rZ_5VI"}},65539:function(e,t,n){n.d(t,{loader:function(){return a}});let a=void 0},16829:function(e,t,n){n.d(t,{loader:function(){return a}}),(0,n(12383).initFlowApi)();let a=void 0},75975:function(e,t,n){n.d(t,{loader:function(){return r}});var a=n("12383");n("51401"),(0,a.initFlowApi)();let r=void 0},83094:function(e,t,n){n.d(t,{loader:function(){return a}}),n(57671),(0,n(12383).initFlowApi)();let a=void 0},77429:function(e,t,n){n.d(t,{useNetworkStore:function(){return o}});var a=n(37222),r=n(85205);let i={isOffline:!1,isHideNetworkStatus:!1},o=(0,r.create)()((0,a.subscribeWithSelector)(e=>({...i,setIsOffline:t=>e(()=>({isOffline:t})),setHideNetworkStatus:t=>e(()=>({isHideNetworkStatus:t}))})))},89777:function(e,t,n){n.d(t,{wrapPrefetchGetter:function(){return r}});var a=n(2945);let r=function(e){let{onClearPromise:t=a.default}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=e;r.then(e=>n=e),r.catch(()=>o());let i=!1,o=()=>{n=null,r=Promise.resolve(null),i=!0,null==t||t()};return()=>({syncValue:n,promise:r,clear:o,cleared:i})}},94044:function(e,t,n){n.d(t,{FLOW_WEB_LOGIN_KEY:function(){return r},isStorageLogined:function(){return l},setStorageHasLogined:function(){return i},setStorageNotLogined:function(){return o}});var a=n(97473);let r="flow_web_has_login",i=()=>{a.FlowLocalStorage.setItem(r,"true")},o=()=>{a.FlowLocalStorage.removeItem(r)},l=()=>"true"===a.FlowLocalStorage.getItem(r)},20639:function(e,t,n){var a;n.d(t,{BizWebPageErrorBoundaryName:function(){return r}});let r=((a={}).NoAccess="no access",a.NetworkError="network error",a.RegionRestricted="region restricted",a.Default="Default",a)},35729:function(e,t,n){var a;n.d(t,{GuidanceMode:function(){return r}});let r=((a={}).ThirdColumns="third-columns",a.SimpleSkills="simple",a.InputCenter="input-center",a)},53054:function(e,t,n){n.d(t,{useSkillGuidance:function(){return m},guidancePrefetchCache:function(){return h}});var a=n("96423"),r=n("95861"),i=n("9315"),o=n("4191"),l=n("21489"),u=n("97959"),s=n("79963");function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let d=[l.SkillType.Search,l.SkillType.ReadPDF,l.SkillType.ImageGeneration,l.SkillType.WriteAssistant],h=new class e{constructor(){c(this,"cache",new Map),c(this,"setCache",(e,t,n)=>{let a,r=this.cache.get(e);(null==r?void 0:r.timer)&&clearTimeout(r.timer);t>-1&&(a=setTimeout(()=>{this.cache.delete(e)},t)),this.cache.set(e,{...n,timer:a})}),c(this,"getCache",e=>this.cache.get(e)),c(this,"clearCache",e=>{e?(Array.isArray(e)?e:[e]).forEach(e=>this.cache.delete(e)):this.cache.clear()})}},f=(e,t)=>{var n,a;return{groups:null==t?void 0:null===(a=t.groups)||void 0===a?void 0:null===(n=a.map)||void 0===n?void 0:n.call(a,(t,n)=>{var a;return{title:t.title,skillType:e[n],next_option_index:t.next_option_index,greeting:t.greeting,items:null===(a=t.items)||void 0===a?void 0:a.map(e=>{let{desc_detail_items:t}=e,n=e.desc?[{highlight:!0,detail:e.desc}]:void 0,a=(null==t?void 0:t.map(e=>({...e,charCount:e.char_count})))||n;return{title:e.title||"",titleIconUrl:e.title_icon_url,backgroundUrl:e.background_url,backgroundUrls:e.background_urls,descItems:a,descIconUrl:e.desc_icon_url,useCacheAnswer:e.use_cache_answer,message:e.message,messages:e.messages}})}}),greeting:null==t?void 0:t.greeting}},g=(0,a.default)(()=>{"object"==typeof window&&(window.skillGuidanceConsumeStart=window.performance.now()),(0,s.getTracingActions)().addDurationPoint("skill_guidance_consume_start")}),m=function(){var e;let{configKey:t="skill-guidance",indexTypeMap:n=d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{run:a,data:l,loading:s,error:c}=(0,r.default)(async e=>{g();let n=(0,i.createReportEvent)({eventName:"skill_guidance_load",meta:{configKey:t,cached:"0"}});try{let a;let r=h.getCache(t);if(r&&(a=r.data,h.clearCache(t),h.clearCache("".concat(t,"_promise")),n.updateMeta({cached:"1"})),!a)try{let e=h.getCache("".concat(t,"_promise"));a=await (null==e?void 0:e.data),h.clearCache("".concat(t,"_promise")),n.updateMeta({cached:"2"})}catch(e){o.logger.persist.error({eventName:"skill_guidance_load_html",error:e instanceof Error?e:Error(String(e))}),h.clearCache("".concat(t,"_promise"))}return!a&&(a=(await u.samanthaApiService.GetSkillGuidance({config_key:t,option_indexes:e})).data),n.addDurationPoint("success"),n.success(),a}catch(e){throw n.error({reason:"load_skill_guidance_failed",error:e instanceof Error?e:Error(String(e))}),e}},{manual:!0,cacheKey:t,staleTime:72e5});return{run:a,data:f(n,null!=l?l:null===(e=h.getCache(t))||void 0===e?void 0:e.data),loading:s||!l&&!c,error:c}}},87775:function(e,t,n){n.d(t,{GuidanceGreetingSkeleton:function(){return l}});var a=n(97458),r=n(87608),i=n.n(r),o=n(11334);let l=e=>{let{t,className:n,hideUsernameBr:r,theme:l,narrowScreen:u}=e;return(0,a.jsx)("div",{className:i()(o.default.header,"chrome70-header flex items-center",n),children:(0,a.jsx)("div",{className:"flex justify-center flex-1",children:(0,a.jsxs)("p",{className:i()("m-0 s-font-h1 !leading-tight w-full select-none",{"!leading-20":u,[o.default.thin]:"thin"===l,[o.default["center-thin"]]:"center-thin"===l}),children:[(0,a.jsx)("span",{className:"text-transparent bg-[rgba(153,153,153,0.1)] rounded-8",children:t("newChat_greeting_title_doubao")}),r?null:(0,a.jsx)("br",{className:"text-12 block m-[1em] content-['']"}),(0,a.jsx)("span",{className:"text-transparent bg-[rgba(153,153,153,0.1)] rounded-8",children:t("newChat_greeting_TitleLine2")})]})})})}},61680:function(e,t,n){n.d(t,{GuidanceGroupsSkeleton:function(){return r}});var a=n(97458);let r=()=>(0,a.jsx)("div",{className:"flex justify-between flex-wrap",children:Array(9).fill(0).map((e,t)=>(0,a.jsx)("div",{className:"h-64 rounded-10 mb-10 w-[30%] bg-[rgba(153,153,153,0.1)]",style:{opacity:1-(t+1)/10}},t))})},35143:function(e,t,n){var a=n(97458);t.default=e=>{let{logo:t="https://lf-flow-web-cdn.doubao.com/obj/flow-doubao/doubao/logo-doubao-overflow.png"}=e;return(0,a.jsx)("img",{src:t,className:"h-60 w-60 top-1/2 absolute",style:{transform:"translate(-50%, -50%)",left:"50%"}})}},8584:function(e,t,n){n.d(t,{BizWebPageErrorFallback:function(){return v}});var a=n(97458),r=n(52983),i=n(72364),o=n(43285),l=n(4191),u=n(20639),s=n(66965),c=n(79297),d=n(82892),h=n(56761);let f=(0,h.withSuspense)(r.lazy(()=>(0,o.retryLoadWithFallBack)({fn:async()=>{let{NoAccessExtraComp:e}=await n.e("8565").then(n.bind(n,67462));return{default:e}}}))),g=(0,h.withSuspense)(r.lazy(()=>(0,o.retryLoadWithFallBack)({fn:async()=>{let{RegionRestrictedComp:e}=await n.e("8565").then(n.bind(n,67462));return{default:e}}}))),m={[u.BizWebPageErrorBoundaryName.NoAccess]:{title:"no_access_permission",showHomeBtn:!0,extraComp:f},[u.BizWebPageErrorBoundaryName.NetworkError]:{title:"log_in_internet_error",showHomeBtn:!0,showReloadBtn:!0},[u.BizWebPageErrorBoundaryName.RegionRestricted]:{title:"region_error_toast_doubao",showAvatar:!0,extraComp:g},default:{title:"page_not_available",subTitle:"page_not_available_desc",showAvatar:!0,showHomeBtn:!0,showReloadBtn:!0}},v=e=>{let{error:t}=e,n=(0,d.useTranslateFn)(),o=m[t.message],u=o||m.default,h=(0,i.default)(u,["showAvatar","showReloadBtn","showHomeBtn","extraComp"]);return(0,r.useEffect)(()=>{l.logger.persist.error({eventName:"biz_web_page_error_fallback",error:t,meta:{error_page:o?t.message:void 0,is_package:1,...t.cause}})},[]),(0,a.jsx)(c.NoSSR,{children:(0,a.jsx)(s.CommonErrorPage,{title:u.title&&n(u.title),subTitle:u.subTitle&&n(u.subTitle),from:"BizWebPageErrorFallback(".concat(t.message,")"),...h})})}},22425:function(e,t,n){n.d(t,{UetTiNumber:function(){return s}});var a,r=n(97458);n(52983);var i=n(51401),o=n(19757),l=n(94343);let u=["bing_sem","bing_xxl"];let s=((a={})[a.WEB_REGISTER=0x5ca1348]="WEB_REGISTER",a[a.DOWNLOAD=0x5ca4797]="DOWNLOAD",a),c=e=>'(function(w,d,t,r,u){var f,n,i;w[u]=w[u]||[],f=function(){var o={ti:"'.concat(e,'", enableAutoSpaTracking: true};o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad")},n=d.createElement(t),n.src=r,n.async=1,n.onload=n.onreadystatechange=function(){var s=this.readyState;s&&s!=="loaded"&&s!=="complete"||(f(),n.onload=n.onreadystatechange=null)},i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)})(window,document,"script","//bat.bing.com/bat.js","uetq")');t.default=e=>{let{uetTiNumber:t}=e,[n]=(0,o.useSearchParams)(),a=n.get("channel")||"",s="1"===i.default.get("is_microsoft_channel");return u.includes(a)||s?(!s&&i.default.set("is_microsoft_channel","1",{expires:7}),(0,r.jsx)(l.Helmet,{children:(0,r.jsx)("script",{children:c(t)})})):null}},77172:function(e,t,n){var a=n(97458),r=n(95041),i=n(68950),o=n(6887),l=n(23631);t.default=()=>{let e=(0,o.useIsChatPage)(),t=(0,o.useIsShareOrChatNewPage)();if((0,i.useOutletContext)()===r.SamanthaLayout.CenterFullMode)return e||t?(0,a.jsx)(l.ChatSkeleton,{}):null}},6410:function(e,t,n){var a=n(97458),r=n(95041),i=n(13586),o=n(68950);t.default=()=>{if((0,o.useOutletContext)()===r.SamanthaLayout.CenterFullMode)return(0,a.jsx)(i.ChatSkeleton,{showInput:!1})}},23631:function(e,t,n){n.d(t,{ChatSkeleton:function(){return C},ChatSkeletonFull:function(){return x}});var a=n("97458"),r=n("52983"),i=n("43285"),o=n("95041"),l=n("82892"),u=n("94816"),s=n("13586"),c=n("94044"),d=n("64267"),h=n("87608"),f=n.n(h),g=n("61680"),m=n("87775"),v=n("75497");let w=e=>{let{t}=e;return(0,a.jsx)(m.GuidanceGreetingSkeleton,{t:t,className:f()("mb-20",v.default.greeting)})},p=()=>{let e=(0,l.useTranslateFn)();return(0,a.jsxs)("div",{className:v.default.fallback,children:[(0,a.jsx)(w,{t:e}),(0,a.jsx)(g.GuidanceGroupsSkeleton,{})]})};var _=n("72537"),b=n("7680"),S=n("6887");let y=(0,u.withSuspense)(r.lazy(()=>(0,i.retryLoadWithFallBack)({fn:()=>Promise.all([n.e("84935"),n.e("25223"),n.e("7242"),n.e("25092")]).then(n.bind(n,32919)).then(e=>{let{GuidancePanelSkeleton:t}=e;return{default:t}}),fallback:{default:()=>(0,a.jsx)(p,{})}})),()=>(0,a.jsx)(p,{})),x=e=>{let t=(0,d.useSideBarExpanded)();return(0,a.jsxs)(o.SamanthaLayout,{style:{"--max-width-layout-container-width":"100vw","--max-width-layout-large-padding":"24px","--max-width-layout-small-padding":"14px"},leftDefaultWidth:"clamp(160px, 25vw, 280px)",rightDefaultWidth:54,children:[t&&(0,a.jsx)(o.SamanthaLayout.LeftSide,{children:(0,a.jsx)(b.SidebarSkeleton,{})}),(0,a.jsx)(o.SamanthaLayout.CenterFullMode,{children:(0,a.jsx)(C,{...e})})]})},C=e=>{let t=(0,l.useTranslateFn)(),n=(0,S.useIsChatLandingPage)(),r=(0,c.isStorageLogined)(),{value:i}=(0,_.useIsNewGuestGuidance)();return(0,a.jsx)(s.ChatSkeleton,{placeholder:t("default_input_placeholder"),showInput:!(n&&!r&&i),content:n?(0,a.jsx)(y,{}):void 0,...e})}},7680:function(e,t,n){n.d(t,{SidebarSkeleton:function(){return l}});var a=n("97458"),r=n("87608"),i=n.n(r),o={skeleton:"skeleton-PNzrmS",sidebar:"sidebar-thKKPB"};let l=e=>{let{style:t,headerBtn:n=!0,className:r}=e;return(0,a.jsxs)("aside",{className:i()(o.sidebar,r,""),style:t,children:[n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"h-36 flex relative items-center overflow-visible px-4 opacity-[0.1]",children:[(0,a.jsx)("div",{className:i()("h-36 w-36 rounded-full flex-shrink-0 mr-8",o.skeleton)}),(0,a.jsx)("div",{className:"grow overflow-hidden",children:(0,a.jsx)("div",{className:i()("h-24 rounded-8 w-40",o.skeleton)})})]}),(0,a.jsx)("div",{className:i()("h-40 rounded-12 mt-16 mb-6",o.skeleton),style:{opacity:.1}})]}),[,,,,,].fill(0).map((e,t)=>(0,a.jsx)("div",{className:"h-32 flex relative rounded-10 items-center overflow-visible pl-27",style:{opacity:.09-t/100},children:(0,a.jsx)("div",{className:"grow overflow-hidden",children:(0,a.jsx)("div",{className:i()("h-20 rounded-8",o.skeleton)})})},t))]})}},44136:function(e,t,n){var a=n(40204);t.default=a.default},40204:function(e,t,n){var a=n(97458),r=n(95041),i=n(13586),o=n(68950);t.default=()=>{if((0,o.useOutletContext)()===r.SamanthaLayout.CenterFullMode)return(0,a.jsx)(i.ChatSkeleton,{showInput:!1})}},21196:function(e,t,n){var a=n(40204);t.default=a.default},81097:function(e,t,n){var a=n(97458),r=n(95041),i=n(68950),o=n(6887),l=n(23631);t.default=()=>{let e=(0,o.useIsChatPage)(),t=(0,o.useIsCollectionPage)(),n=(0,o.useIsShareOrChatNewPage)();if((0,i.useOutletContext)()===r.SamanthaLayout.CenterFullMode)return e||t||n?(0,a.jsx)(l.ChatSkeleton,{showInput:!t}):null}},6887:function(e,t,n){n.d(t,{canInitChatAppConversationReport:function(){return y},checkIsCurrentActivedChat:function(){return f},getChatIdFromURL:function(){return c},getChatTypeFromURL:function(){return d},getIsChatPage:function(){return g},getTagIdFromURL:function(){return h},handleNotificationNavigation:function(){return x},useIsChatLandingPage:function(){return _},useIsChatPage:function(){return m},useIsChatPageOther:function(){return b},useIsCollectionPage:function(){return w},useIsShareOrChatNewPage:function(){return v},useIsSkillGuidancePage:function(){return S}});var a=n(37903),r=n(5076),i=n(60768),o=n(16596),l=n(68950),u=n(96671),s=n(54987);let c=()=>{let e=(0,o.matchPath)("/chat/:id",window.location.pathname),{id:t}=(null==e?void 0:e.params)||{};return!(0,a.default)(t)&&(0,i.isNumeric)(t)?t:void 0},d=()=>Number(new URLSearchParams(window.location.search).get("type")),h=()=>Number(new URLSearchParams(window.location.search).get("tagId")),f=e=>{let[,t]=e.split("./"),[,n]=location.pathname.split("/chat/");return t===n},g=e=>/\/chat(\/(local_|main)?\d*)?(\?.*)?$/.test(e),m=()=>g((0,l.useLocation)().pathname),v=()=>{let e=(0,l.useLocation)();return/\/share(\/\d*)?$/.test(e.pathname)||/\/chat\/new(\/\d*)?$/.test(e.pathname)||/\/chat\/new-thread\/create-by-share\/?$/.test(e.pathname)},w=()=>{let e=(0,l.useLocation)();return/^\/chat\/collection(\/\d*)?$/.test(e.pathname)},p=e=>e.endsWith("/chat/"),_=()=>p((0,l.useLocation)().pathname),b=()=>{let e=(0,l.useLocation)(),t=m(),n=S();return!t&&!n&&/\/chat\/.*$/.test(e.pathname)},S=()=>{let e=(0,l.useLocation)();return Object.values(s.SkillGuidancePageRoute).includes(e.pathname)},y=()=>{var e;if("undefined"==typeof window)return!1;let t=(0,r.parseHashOrQuery)(location.search),n=(0,u.hasUGRedirectQuery)(),{from_login:a,guest_landing:i,token:o}=t;return!!(null===(e=window)||void 0===e?void 0:e.performance)&&"1"!==i&&"1"!==a&&!o&&!n&&!0},x=(e,t,n)=>{try{let a="flow_page_target",r=new URL(e),i=r.origin===location.origin;n&&r.searchParams.append("enter_from",n);let o=e=>window.open(e),l=e=>{try{let n=new URL(e);i&&n.pathname.startsWith("/chat")?t(n.pathname+n.search):window.location.href=e}catch(e){}};if(r.searchParams.has(a)){let e=r.searchParams.get(a);r.searchParams.delete(a);let t=r.toString();"blank"===e?o(t):l(t)}else i?l(e):o(e)}catch(e){}}},72537:function(e,t,n){n.d(t,{useGuidanceMode:function(){return v},useIsNewGuestGuidance:function(){return w}});var a=n(52983),r=n(97275),i=n(62044),o=n(87408),l=n(27886),u=n(93363),s=n(94044),c=n(13702),d=n(89777),h=n(21443),f=n(4191),g=n(35729);let m="object"==typeof window&&"object"==typeof window[i.PromiseName.GuestLayoutMode]?(0,d.wrapPrefetchGetter)(window[i.PromiseName.GuestLayoutMode]):void 0,v=e=>{var t,n,i,d;let v=(0,s.isStorageLogined)(),w=(0,c.useIsLoggedIn)(),p=(0,c.useIsLoginLoading)(),_=(0,o.getFGValue)(l.FGLocalDebugKeys.guestGuidanceType,{source:u.FGBuiltinNames.debugStorage}),{promise:b,syncValue:S}=null!==(d=null==m?void 0:m())&&void 0!==d?d:{},y=null==S?void 0:null===(i=S.data)||void 0===i?void 0:null===(n=i.ab_config)||void 0===n?void 0:null===(t=n.ab_results)||void 0===t?void 0:t.guest_guidance_type,[x,C]=(0,h.default)(()=>v||w?g.GuidanceMode.SimpleSkills:(0,r.default)(_)&&_?_:(0,r.default)(y)&&y?y:g.GuidanceMode.InputCenter),[k,N]=(0,h.default)(()=>!(v||(0,r.default)(_)||(0,r.default)(y))&&!0);return(0,a.useEffect)(()=>{w&&(C(g.GuidanceMode.SimpleSkills),N(!1))},[w]),(0,a.useEffect)(()=>{if(b){if(!w)b.then(t=>{var n,a,i;if(!t||0!==t.code)throw Error(JSON.stringify(t));let{guest_guidance_type:o}=null!==(i=null===(a=t.data)||void 0===a?void 0:null===(n=a.ab_config)||void 0===n?void 0:n.ab_results)&&void 0!==i?i:{};!(0,r.default)(_)&&o&&(null==e||e.updateMeta({guidance_mode:o}),null==C||C(o))}).catch(e=>{f.logger.console.error(e)}).finally(()=>{N(!1),null==e||e.updateMeta({guidance_mode:x})})}else N(!1),null==e||e.updateMeta({guidance_mode:x})},[p,w]),{value:x,loading:k}},w=()=>{let{value:e,loading:t}=v();return{value:e===g.GuidanceMode.InputCenter,loading:t}}},50846:function(e,t,n){var a=n(97458);n(52983);var r=n(55814);t.default=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.LoaderError,{})})},3887:function(e,t,n){n.r(t),n.d(t,{config:function(){return eu},default:function(){return ec},init:function(){return es}}),n("35085"),n("57442");var a=n("59236"),r=n.n(a),i=n("33005"),o=n("84044"),l=n("94546"),u=n("12383"),s=n("38829");n("22984");var c=n("97458"),d=n("52983");let h={script:performance.now(),init:0,layout:0};var f=n("96423"),g=n("2945"),m=n("38501"),v=n("55244"),w=n("73347"),p=n("31975"),_=n("45294"),b=n("94044"),S=n("19760"),y=n("4191"),x=n("6038"),C=n("33434"),k=n("77429");let N=()=>{let e=(0,d.useRef)(!0),[t]=(0,k.useNetworkStore)(e=>[e.setIsOffline],C.shallow),n=(0,d.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y.logger.console.warning({message:"Network Status Change",meta:{isOffline:!e,isInit:n}}),t(!e)},[t]);return(0,d.useEffect)(()=>{var t,a;n(null===(a=window)||void 0===a?void 0:null===(t=a.navigator)||void 0===t?void 0:t.onLine,!0);let r=()=>n(!0),i=()=>n(!1);return e.current=!1,window.addEventListener("online",r),window.addEventListener("offline",i),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}},[]),null};var L=n("35729"),j=n("53054"),I=n("68950"),E=n("94343"),P=n("79297"),T=n("60333"),R=n("8149"),G=n("96671"),F=n("40469"),A=n("55048"),B=n("16428"),O=n("26093"),U=n("9746");n("2035");var D=n("22425"),W=n("8584"),M=()=>(0,c.jsx)(c.Fragment,{}),H=n("35143"),z=n("67421"),Q=n("6887"),V=n("23631");let K=(0,f.default)(()=>{if("undefined"!=typeof window)window.root_layout_first_render=performance.now(),window.enter_pathname=location.pathname}),$=()=>{var e,t,n,a;(0,v.trackEvent)("page_launch",{...(0,G.hasDouyinRedirectQuery)()?{enter_method:"douyin"}:{}}),(0,i.getSlardar)()("sendEvent",{name:"page_launch",categories:{tea_uid:String((null===(t=window)||void 0===t?void 0:null===(e=t.Tea)||void 0===e?void 0:e.getConfig("user_id"))||""),tea_uuid:String((null===(a=window)||void 0===a?void 0:null===(n=a.Tea)||void 0===n?void 0:n.getConfig("user_unique_id"))||"")}})};var q=n("51401"),J=n("51996"),X=n("37403"),Y=n("53884"),Z=n("91534"),ee=n("42608"),et=n("62239"),en=n("85668");n("81729");var ea=n("16761"),er=n("96393"),ei=n("95360"),eo=n("54987");let el=async e=>{var t,n,a,r,o,l,u,s;if(!(null===(t=e.context)||void 0===t?void 0:t.isBrowser))return;(0,J.isInSuperApp)()&&await (null===(u=window.openIdPromise)||void 0===u?void 0:u.catch(g.default)),e.Plugins.Tea.start(),h.init=performance.now(),et.default.config({top:32,zIndex:9999});let c=(0,ee.getSSOEmail)();await (0,ea.initWebTeaConfig)(e.Plugins.Tea,{lifecycle:(0,er.getLifeCycleConfig)({needGaReportEventNames:["predefine_pageview_all","click_login","login_result","send_message"]})}),X.FlowTeaController.init({runtimeContext:e}),(0,Y.updateTeaGuestUid)();let d=(0,i.getSlardar)();d("context.set","is_pwa_user",(0,J.isPWA)()?"1":"0"),d("context.set","is_main_ssr",q.default.get("distributary_main_ssr_state")||"0");d("context.set","distributary_main_ssr_state",q.default.get("distributary_main_ssr_state")),d("context.set","is_browser",(null===(n=e.context)||void 0===n?void 0:n.isBrowser)?"1":"0"),d("context.set","render_level",null!==(s=null===(a=window._SSR_DATA)||void 0===a?void 0:a.renderLevel)&&void 0!==s?s:"0"),d("context.set","is_canary_dev",(0,eo.isCanaryOrDev)()?"1":"0"),d("context.set","samantha_web","1");let f=(0,en.getCountry)();f&&d("context.set","country",f),d("context.set","samantha_version_client",(0,J.getSamanthaClientVersion)()),d("context.set","samantha_client",(0,J.getSamanthaClientType)()),d("context.set","is_samantha_client",(0,J.isSamanthaClient)()?"1":"0"),d("context.set","is_from_share",(0,G.hasThreadShareQuery)()?"1":"0"),d("context.set","is_from_ug",(0,Z.getSemChannel)()?"1":"0"),d("context.set","ug_source",null===(r=(0,Z.getSemChannel)())||void 0===r?void 0:r.substring(0,100)),d("context.set","sso_email",c),null===(l=window.openIdPromise)||void 0===l||null===(o=l.catch(()=>({open_id:void 0})))||void 0===o||o.then(function(){let{open_id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&d("context.set","open_id",e)});(0,ei.initLoggerWithSlardar)()};n("93094"),n("95539"),n("77512");let eu=()=>({slardar:(0,i.getSlardarConfig)(),intl:{intlOptions:{plugins:[r()]}}}),es=e=>{(0,s.initDebugFG)(),(0,u.initFlowApi)(),(0,l.initI18n)(),(0,o.initFlowAccount)(),el(e),(0,l.initLanguage)()};var ec=()=>{let e=(0,I.useLocation)();K(),(0,U.useInitExternalLink)(),(0,O.useSSRRenderLevelReport)(),(0,A.useFeatureConfigEffect)();let t=()=>{(0,v.trackEvent)("predefine_pageview_all")};(0,d.useEffect)(()=>{(0,i.logRootLayoutRenderStart)();let e=setTimeout(()=>{try{(0,B.TestTeaBlockUrl)()}catch(e){}},2e3);return()=>{clearTimeout(e)}},[]),(0,d.useEffect)(()=>{$();let e=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"visible"===document.visibilityState&&($(),!e&&t())},n=()=>e();window.addEventListener("visibilitychange",n);let a=(0,S.listenScreenWideTypeChange)();return()=>{window.removeEventListener("visibilitychange",n),a()}},[]);let n=e=>{var t,n,a,r,i,o;null===(a=window)||void 0===a||null===(n=a.guidancePromise)||void 0===n||null===(t=n.then)||void 0===t||t.call(n,t=>{(null==t?void 0:t.data)&&j.guidancePrefetchCache.setCache(e,72e5,{data:t.data,time:Date.now(),params:[]})}).catch(g.default),(null===(r=window)||void 0===r?void 0:r.guidancePromise)&&j.guidancePrefetchCache.setCache("".concat(e,"_promise"),72e5,{data:null===(o=window)||void 0===o?void 0:null===(i=o.guidancePromise)||void 0===i?void 0:i.then(e=>null==e?void 0:e.data),time:Date.now(),params:[]})};(0,d.useEffect)(()=>{if((0,b.isStorageLogined)())n("skill_guidance_v2");else{var e,t,a;null===(a=window)||void 0===a||null===(t=a.guestLayoutModePromise)||void 0===t||null===(e=t.then)||void 0===e||e.call(t,e=>{var t,a,r;let i=(null==e?void 0:null===(r=e.data)||void 0===r?void 0:null===(a=r.ab_config)||void 0===a?void 0:null===(t=a.ab_results)||void 0===t?void 0:t.guest_guidance_type)===L.GuidanceMode.InputCenter;n(i?"tourist_mode":"skill_guidance_v2")})}},[]),(0,d.useEffect)(()=>{t()},[e]);let a=(0,w.getLanguageDirection)(),r=(0,Q.useIsChatPage)(),o=(0,Q.useIsShareOrChatNewPage)(),l=(0,Q.useIsChatPageOther)(),u="/"===e.pathname,s=(0,Q.useIsSkillGuidancePage)();return(0,m.useAutoVisitPageCollect)(F.RouteEntryName.Main),(0,c.jsx)(_.ErrorBoundary,{errorBoundaryName:"flow_web_app_error",logger:y.logger,onError:g.default,FallbackComponent:W.BizWebPageErrorFallback,errorBoundaryScope:_.ErrorBoundaryScopeEnum.Page,children:(0,c.jsx)(R.default,{locale:T.default,children:(0,c.jsx)(p.RTLProvider,{value:"rtl"===a,children:(0,c.jsxs)(x.LoggerContext.Provider,{value:y.logger,children:[(0,c.jsx)(E.Helmet,{htmlAttributes:{dir:a},children:(0,c.jsx)("title",{children:(0,z.useRootTitle)()})}),(0,c.jsxs)("div",{className:"flow-web-root-outlet",children:[(0,c.jsx)(I.Outlet,{}),(0,c.jsx)(P.NoSSR,{children:(0,c.jsx)(D.default,{uetTiNumber:D.UetTiNumber.WEB_REGISTER})})]}),(0,c.jsx)("div",{className:"flow-web-root-skeleton",children:(0,c.jsx)(d.Suspense,{fallback:null,children:r||u||l||s||o?(0,c.jsx)(V.ChatSkeletonFull,{showInput:!l}):(0,c.jsx)(H.default,{})})}),(0,c.jsxs)(P.NoSSR,{children:[(0,c.jsx)(M,{}),(0,c.jsx)(N,{})]})]})})})})}},3454:function(e,t,n){var a=n(97458),r=n(68950),i=n(35143),o=n(6887),l=n(23631);t.default=()=>{let e=(0,o.useIsChatPage)(),t=(0,o.useIsChatPageOther)(),n=(0,o.useIsShareOrChatNewPage)(),u="/"===(0,r.useLocation)().pathname,s=(0,o.useIsSkillGuidancePage)();return e||u||t||s||n?(0,a.jsx)(l.ChatSkeletonFull,{showInput:!t}):(0,a.jsx)(i.default,{})}},67421:function(e,t,n){n.d(t,{useRootTitle:function(){return o}});var a=n(51996),r=n(42269),i=n(82892);let o=()=>{let e=(0,i.useTranslateFn)();return"".concat("").concat((0,a.isInSuperApp)()?r.brandName:e("web_seo_doubao_index"))}},16428:function(e,t,n){n.d(t,{TestTeaBlockUrl:function(){return o},getTeaUUidAndUid:function(){return u}});var a=n(53884),r=n(97959),i=n(97473);function o(){["https://opt.doubao.com/monitor_web/settings/browser-settings?bid=flow_web&store=1","https://opt.doubao.com/monitor_browser/collect/batch/?biz_id=flow_web","https://mcs.doubao.com/list"].forEach(e=>{fetch(e).then().catch(t=>{l(e)})})}async function l(e){let{tea_uid:t,tea_uuid:n}=await u({});r.seoApiService.SetBlockRecord({tea_uid:t,tea_uuid:n,current_url:i.FlowLocalStorage.getItem("flow_web_landing_page_url")||"",block_url:e})}let u=e=>{let{needUid:t=!0}=e;return new Promise(e=>{let n=setInterval(()=>{let r=(0,a.getUuidAndWebIdFromTeaConfig)().uuid,i=(0,a.getUidFromTeaConfig)();r&&(i||!t)&&(clearInterval(n),e({tea_uid:String(i),tea_uuid:String(r)}))},500);setTimeout(()=>{clearInterval(n)},1e4)})}},96393:function(e,t,n){n.d(t,{getLifeCycleConfig:function(){return r}});let a=async(e,t)=>{},r=e=>{let{needGaReportEventNames:t}=e;return{onEventSubmitBefore:e=>a(e,t)}}},81729:function(e,t,n){n.d(t,{checkVoiceCallIsAllow:function(){return i}});var a=n(51996);n(2035);var r=n(32891);let i=()=>(0,a.isSamanthaClient)()&&(0,r.checkIsAllowDesktopVersion)({greaterEqualVersion:"1.25.0"})},32891:function(e,t,n){n.d(t,{checkIsAllowDesktopVersion:function(){return r}});var a=n(51996);let r=e=>{let{greaterEqualVersion:t}=e,n=(0,a.getSamanthaClientVersion)().split(".").map(Number);if(t){let e=t.split(".").map(Number),a=!0;for(let t=0;t<Math.max(n.length,e.length);t++){if(t>=n.length){a=!1;break}if(t>=e.length||n[t]>e[t])break;if(n[t]<e[t]){a=!1;break}}return a}return!0}},96671:function(e,t,n){n.d(t,{getGuestHideHomepageUrl:function(){return o},getValidUrl:function(){return d},hasDouyinRedirectQuery:function(){return u},hasThreadShareQuery:function(){return s},hasUGRedirectQuery:function(){return l},isSamanthaChatUrl:function(){return c}}),n(52983);var a=n(5076),r=n(4191);n(54987);let i="undefined"==typeof window?{search:"",pathname:""}:window.location,o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;try{var t;return(null===(t=(0,a.parseHashOrQuery)(e.search||""))||void 0===t?void 0:t.ghh)==="1"}catch(t){return r.logger.persist.error({eventName:"uri_error",message:"URI Error: ".concat(e.search),meta:{search:e.search},error:t}),!1}},l=()=>{var e;return!!(null===(e=(0,a.parseHashOrQuery)(i.search||""))||void 0===e?void 0:e.keyword)},u=()=>{var e;return!!(null===(e=(0,a.parseHashOrQuery)(i.search||""))||void 0===e?void 0:e.open_from_douyin)},s=()=>{var e,t;return!!(null===(t=(0,a.parseHashOrQuery)(i.search||""))||void 0===t?void 0:null===(e=t.from)||void 0===e?void 0:e.startsWith("share-talk"))},c=e=>RegExp("www.(doubao|ciciai).com/chat").test(e),d=e=>{try{return e?new URL(e).toString():""}catch(e){return""}}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,["1207","14308","2118","22072","22734","25017","43361","47337","47699","61999","62840","65416","6907","70687","72126","75086","75495","75902","81383","81835","84584","87333"],function(){return t("48432"),t("28651"),t("81125")}),e.O()}]);